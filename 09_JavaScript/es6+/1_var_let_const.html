<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script>
  //var, let , const의 차이

  // 1. var
  // 함수 스코프에 종속, 그외엔 전역
  // 블록 기준으로 스코프가 생기지 않기 때문에 블록밖에서 접근 가능
  // 예: for문(블록스코프) 내에서 var로 선언하면 for문 밖에서도 사용가능

  for (var i = 0; i < 10; i++) {
    var leak = 'I am available outside of the loop';
  }
  console.log(leak);//var전역, 블록 스코프를 벗어나도 접근가능

  function myFunc() {
    var functionScoped = 'I am available inside this function';
    console.log(functionScoped);
  }
  myFunc();
  // console.log(functionScoped); //함수를 벗어나면 접근불가

  // 2. let 
  // 블록 스코프에 종속, 그외엔 전역
  // 변수가 선언된 블록과 그 하위블록 내에서만 사용 가능
  // let사용 예
  let x = 'global';//전역변수
  if (x === 'global') {
    let x = 'block-scoped';//지역변수
    console.log(x);//block-scoped
  }
  console.log(x);//global

  //var 사용예
  var y = 'global';//전역변수
  if (y === 'global') {
    var y = 'block-scoped';//전역변수 값을 덮어씌움
    console.log(y);//block-scoped
  }
  console.log(y);//y값이 변경되어 있음! block-scoped

  // 3.const
  // 블록 스코프에 종속, 그외엔 전역
  // 값이 변경될 수 없다
  // const constant = 'I am a constant'; //전역변수
  // constant = 'can not be reassigned'; // 값의 재할당 불가
  // const에 객체가 담겼다면

  const person = {
    name:'goni',
    age: 25,
  };

  person.age = 26;
  console.log(person.age);
  
  //변수 전체를 재할당 하는 것이 아니라 그 속성 중 하나만 재할당하는 것이라 문제 없음
  // person 변수에는 객체의 참조값(주소값,번지)이 들어있음.

  // const person = 4; 이런건 안됨

  // (참고) 객체의 내용을 변경 할 수 없게  const 객체를 고정할 수는 있다.
  const fixPerson = {
    name:'goni',
    age: 25
  };

  Object.freeze(fixPerson);
  fixPerson.age = 30;//따로 에러는 발생하지 않음
  console.log(fixPerson.age);//25


  //4.선언하기 전 사용할 수 있는 var
  // console.log(iam);//undefined //에러
  var iam = 'I am a varlable';
  //var는 정의되기 전에 접근 가능, 값은 비어 있는 상태(underfined)

  // console.log(jam)//에러
  let jam = 'I am a let';
  // let, const는 정의 되기 전에 접근불가

  //var, let, const 선언 모두 호이스팅의 대상이 됨
  //Point! 선언만 호이스팅 대상(js는 초기화를 제외한 선언만 호이스팅)

  // let 과 const로 선언한 변수도 호이스팅 대상이지만
  // var와 달리  undefined로 변수를 초기화 하지 않음
  // 따라서 변수와 초기화를 수행하기 전에 읽는 코드가 먼저 나타나면 애러가 발생함

  // 5.var는 중복 선언을 허용
  var user = 'Peter';
  var user = 'john';
  console.log (user);

  // (정리) var와 let, const 와 차이점
  // 1) 스코프가 다르다.
  // var로 선언힌 변수는 블록 스코프가 아닌 함수 수준 스코프를 갖는다.
  // 2) var는 정의되기 전에 접근 할 수 있다. (정의되기 전에는 undefined)
  // 3) var는 중복선언을 허용한다.



</script>
<body>
  
</body>
</html>